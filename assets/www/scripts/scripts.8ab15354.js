"use strict";var config={android:!0};angular.module("newsfeederApp",["ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.router"]).constant("config",config).config(["$stateProvider","$urlRouterProvider","$provide",function(a){a.state("index",{url:"",templateUrl:"views/list.html",controller:"ListCtrl"}).state("list",{url:"/list",templateUrl:"views/list.html",controller:"ListCtrl"}).state("story",{url:"/story",templateUrl:"views/story.html",controller:"StoryCtrl"})}]),angular.module("newsfeederApp").factory("$exceptionHandler",function(){return function(a){if("Cannot read property 'resolve' of undefined"==a.message)return void console.log(a.message);({title:a.message,date:moment().utc().toDate().format("YYYYMMDD HH:mm:ss:SS"),stack:a.stack});console.log(a.message)}});var objControl=function(){};objControl.prototype.isCollection=function(a){return gf_IsNull(a.length)?!1:!0},objControl.prototype.enableObj=function(a){if("string"==typeof a&&(a=document.getElementsByName(a)),this.isCollection(a))for(var b=0;b<a.length;b++)a[b].disabled=!1;else a.disabled=!1},objControl.prototype.disableObj=function(a){if("string"==typeof a&&(a=document.getElementsByName(a)),this.isCollection(a))for(var b=0;b<a.length;b++)a[b].disabled=!0;else a.disabled=!0},objControl.prototype.enable=function(a,b){if("string"==$.type(a))if(a.indexOf(",")<=-1)b?this.enableObj(document.getElementsByName(a)):this.disableObj(document.getElementsByName(a));else for(var c=a.split(","),d=0;d<c.length;d++){var e=document.getElementsByName(c[d]);b?this.enableObj(e):this.disableObj(e)}};var gf_Objs=new objControl;String.prototype.replaceAll=function(a,b){var c=null,d=new RegExp(a,"g");return c=this.replace(d,b)},String.prototype.simpleReplace=function(a,b){var c=a;c=c.replace(/\\/g,"\\\\"),c=c.replace(/\^/g,"\\^"),c=c.replace(/\$/g,"\\$"),c=c.replace(/\*/g,"\\*"),c=c.replace(/\+/g,"\\+"),c=c.replace(/\?/g,"\\?"),c=c.replace(/\./g,"\\."),c=c.replace(/\(/g,"\\("),c=c.replace(/\)/g,"\\)"),c=c.replace(/\|/g,"\\|"),c=c.replace(/\,/g,"\\,"),c=c.replace(/\{/g,"\\{"),c=c.replace(/\}/g,"\\}"),c=c.replace(/\[/g,"\\["),c=c.replace(/\]/g,"\\]"),c=c.replace(/\-/g,"\\-");var d=new RegExp(c,"g");return this.replace(d,b)},String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.ltrim=function(){return this.replace(/^\s+/,"")},String.prototype.rtrim=function(){return this.replace(/\s+$/,"")},String.prototype.fulltrim=function(){return this.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")},String.prototype.startsWith=function(a){return this.slice(0,a.length)==a},String.prototype.endsWith=function(a){return this.slice(-a.length)==a};var GLB_MONTH_IN_YEAR=["January","February","March","April","May","June","July","August","September","October","November","December"],GLB_SHORT_MONTH_IN_YEAR=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],GLB_DAY_IN_WEEK=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],GLB_SHORT_DAY_IN_WEEK=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];Date.prototype.format=function(a){var b,c=this.getFullYear(),d=this.getMonth()+1,e=this.getDate(),f=this.getDay(),g=this.getHours(),h=12>g?"AM":"PM",i=g>12?g-12:g,j=this.getMinutes(),k=this.getSeconds(),l=""+c,m=l.substr(2),n=1==(""+d).length?"0"+d:""+d,o=GLB_MONTH_IN_YEAR[d-1],p=GLB_SHORT_MONTH_IN_YEAR[d-1],q=1==(""+e).length?"0"+e:""+e,r=GLB_DAY_IN_WEEK[f],e=GLB_SHORT_DAY_IN_WEEK[f],s=1==(""+g).length?"0"+g:""+g,t=1==(""+i).length?"0"+i:""+i,u=1==(""+j).length?"0"+j:""+j,v=1==(""+k).length?"0"+k:""+k,w=""+this.getMilliseconds();return b="undefined"==typeof a?"DDMMYYYY":a,b=b.replace(/YYYY/g,l),b=b.replace(/YY/g,m),b=b.replace(/MM/g,n),b=b.replace(/MON/g,o),b=b.replace(/mon/g,p),b=b.replace(/DD/g,q),b=b.replace(/DAY/g,r),b=b.replace(/day/g,e),b=b.replace(/hh/g,t),b=b.replace(/HH/g,s),b=b.replace(/mm/g,u),b=b.replace(/ss/g,v),b=b.replace(/SS/g,w),b=b.replace(/(\s+)a/g,"$1"+h)},Date.prototype.after=function(a,b,c,d,e,f,g){return null==a&&(a=0),null==b&&(b=0),null==c&&(c=0),null==d&&(d=0),null==e&&(e=0),null==f&&(f=0),null==g&&(g=0),0!=a&&this.addYear(a),0!=b&&this.addMonth(b),0!=c&&this.addDate(c),0!=d&&this.addHours(d),0!=e&&this.addMinutes(e),0!=f&&this.addSeconds(f),0!=g&&this.addMilliseconds(g),this},Date.prototype.before=function(a,b,c,d,e,f,g){return null==a&&(a=0),null==b&&(b=0),null==c&&(c=0),null==d&&(d=0),null==e&&(e=0),null==f&&(f=0),null==g&&(g=0),0!=a&&this.addYear(-1*a),0!=b&&this.addMonth(-1*b),0!=c&&this.addDate(-1*c),0!=d&&this.addHours(-1*d),0!=e&&this.addMinutes(-1*e),0!=f&&this.addSeconds(-1*f),0!=g&&this.addMilliseconds(-1*g),this},Date.prototype.addYear=function(a){this.setFullYear(this.getFullYear()+a)},Date.prototype.addMonth=function(a){this.setMonth(this.getMonth()+a)},Date.prototype.addDate=function(a){this.setDate(this.getDate()+a)},Date.prototype.addHours=function(a){this.setHours(this.getHours()+a)},Date.prototype.addMinutes=function(a){this.setMinutes(this.getMinutes()+a)},Date.prototype.addSeconds=function(a){this.setSeconds(this.getSeconds()+a)},Date.prototype.addMilliseconds=function(a){this.setMilliseconds(this.getMilliseconds()+a)},Date.prototype.period=function(a,b){"string"!=typeof a&&(b=a,a="year");var c=this.getYear(),d=b.getYear(),e=this.getMonth()+1,f=b.getMonth()+1,g=this.getTime(),h=b.getTime();return"year"==a?d-c:"month"==a?12*(d-c)+(f-e):"date"==a?Math.floor((h-g)/1e3/60/60/24):"hour"==a?Math.floor((h-g)/1e3/60/60):"minute"==a?Math.floor((h-g)/1e3/60):"second"==a?Math.floor((h-g)/1e3):void 0},Date.prototype.getLocalDate=function(a){return 0>a?(a=-1*a,this.before(null,null,null,a,null,null,null)):this.after(null,null,null,a,null,null,null),this},Array.prototype.contains=function(a){for(var b in this)if(this[b]==a)return!0;return!1},String.prototype.padstring=function(a,b,c){var d=this;if("string"==typeof a&&1===a.length&&b>this.length){var e=new Array(b-this.length+1).join(a);d=c?d+e:e+d}return d},angular.module("newsfeederApp").filter("shortener",function(){return function(a){return a.length>90&&(a=a.substring(0,90)+"..."),a}}),angular.module("newsfeederApp").controller("ListCtrl",["$scope","$http","$state","config","MainService",function(a,b,c,d,e){var f=0;a.next=function(b){b||(b=f+1,f=b),a.retrieve(b)},a.prev=function(b){b||(b=f-1,f=b),a.retrieve(b)},a.init=function(){a.storys||a.retrieve(0)},a.retrieve=function(b){if(b||(b=f),d.back)a.storys=d.storys,d.back=!1;else{var c="2015-04-18T20:35:02-05:00";e.R.get({last_updated:c,page:b},function(b){b.rows&&(a.storys=b.rows,d.storys=a.storys)},function(){})}a.published_date=a.storys[0].published_date},a.open=function(a){d.item=a,c.go("story")}}]);var gfNextPage=function(a){var b=angular.element($("#listCtrl")).scope();b.$apply(function(){for(var c=0;c<a.length;c++){a[c].multimedia||(a[c].multimedia="images/ny.png");var d=a[c].published_date;d=d.substring(0,d.lastIndexOf("-")),a[c].published_date=moment(d).format("YYYY-MM-DD"),b.storys[b.storys.length]=a[c]}})};angular.module("newsfeederApp").factory("MainService",["$resource","config",function(a,b){var c={};c.R={};try{return c.R.get=function(a,c){var d={};if(b.android){var e=Android.getStoryList(JSON.stringify(a));d.rows=JSON.parse(e)}else d.rows=[{section:"World",subsection:"Europe",title:"In the days after Andreas Lubitz","abstract":"In the days after Andreas Lubitz flew himself and 149 others into the French Alps, investigations have exposed weaknesses by the airline industry in dealing with mental illness among pilots.",url:"http://www.nytimes.com/2015/04/19/world/europe/germanwings-plane-crash-andreas-lubitz-lufthansa-pilot-suicide.html",byline:"By NICHOLAS KULISH and NICOLA CLARK",item_type:"Article",updated_date:"2015-04-18T11:02:22-5:00",created_date:"2015-04-18T10:38:29-5:00",published_date:"2015-04-19T04:00:00-5:00",material_type_facet:"News",kicker:"",des_facet:["Aviation Accidents, Safety and Disasters","Mental Health and Disorders","Airlines and Airplanes","Regulation and Deregulation of Industry"],org_facet:"Germanwings GmbH",per_facet:"Lubitz, Andreas",geo_facet:"",multimedia:"http://static01.nyt.com/images/2015/04/18/business/18econstage-web2/18econstage-web2-thumbStandard.jpg",normal:"http://static01.nyt.com/images/2015/04/20/us/20MILITARYjp01sub/20MILITARYjp01sub-articleInline.jpg"},{section:"World",subsection:"Europe",title:"222","abstract":"desc2",url:"http://www.nytimes.com/2015/04/19/world/europe/germanwings-plane-crash-andreas-lubitz-lufthansa-pilot-suicide.html",byline:"By NICHOLAS KULISH and NICOLA CLARK",item_type:"Article",updated_date:"2015-04-18T11:02:22-5:00",created_date:"2015-04-18T10:38:29-5:00",published_date:"2015-04-19T04:00:00-5:00",material_type_facet:"News",kicker:"",des_facet:["Aviation Accidents, Safety and Disasters","Mental Health and Disorders","Airlines and Airplanes","Regulation and Deregulation of Industry"],org_facet:"Germanwings GmbH",per_facet:"Lubitz, Andreas",geo_facet:"",multimedia:""},{section:"World",subsection:"Europe",title:"333","abstract":"desc3",url:"http://www.nytimes.com/2015/04/19/world/europe/germanwings-plane-crash-andreas-lubitz-lufthansa-pilot-suicide.html",byline:"By NICHOLAS KULISH and NICOLA CLARK",item_type:"Article",updated_date:"2015-04-18T11:02:22-5:00",created_date:"2015-04-18T10:38:29-5:00",published_date:"2015-04-19T04:00:00-5:00",material_type_facet:"News",kicker:"",des_facet:["Aviation Accidents, Safety and Disasters","Mental Health and Disorders","Airlines and Airplanes","Regulation and Deregulation of Industry"],org_facet:"Germanwings GmbH",per_facet:"Lubitz, Andreas",geo_facet:"",multimedia:"http://static01.nyt.com/images/2015/04/18/business/18econstage-web2/18econstage-web2-thumbStandard.jpg",normal:"http://static01.nyt.com/images/2015/04/20/us/20MILITARYjp01sub/20MILITARYjp01sub-articleInline.jpg"}];for(var f=0;f<d.rows.length;f++){d.rows[f].multimedia||(d.rows[f].multimedia="images/ny.png");var g=d.rows[f].published_date;g=g.substring(0,g.lastIndexOf("-")),d.rows[f].published_date=moment(g).format("YYYY-MM-DD")}c(d)},c}catch(d){return null}}]);var player,storyId;angular.module("newsfeederApp").controller("StoryCtrl",["$window","$rootScope","$scope","$sce","$state","config",function(a,b,c,d,e,f){c.onload=function(){f.item&&(c.item=angular.fromJson(f.item))},b.goBack=function(){f.back=!0,a.history.back()}}]);